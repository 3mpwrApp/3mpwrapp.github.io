function handleModalEscape(e){if("Escape"===e.key){const e=document.querySelector('[role="dialog"]:not([hidden])');e&&closeModal(e.id)}}function trapFocus(e){const t=e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),n=t[0],o=t[t.length-1];e.addEventListener("keydown",function(e){"Tab"===e.key&&(e.shiftKey?document.activeElement===n&&(o.focus(),e.preventDefault()):document.activeElement===o&&(n.focus(),e.preventDefault()))})}!function(){"use strict";function e(){const e=document.querySelector(".accessibility-toolbar"),t=document.getElementById("toolbarToggle"),n=document.getElementById("toolbar-content");function o(){e.classList.remove("collapsed"),t.setAttribute("aria-expanded","true"),n.hidden=!1,localStorage.setItem("toolbarExpanded","true"),i("Accessibility tools expanded")}function a(){e.classList.add("collapsed"),t.setAttribute("aria-expanded","false"),n.hidden=!0,localStorage.setItem("toolbarExpanded","false"),i("Accessibility tools collapsed")}function i(e){const t=document.createElement("div");t.setAttribute("role","status"),t.setAttribute("aria-live","polite"),t.classList.add("sr-only"),t.textContent=e,document.body.appendChild(t),setTimeout(function(){document.body.removeChild(t)},1e3)}e&&t&&n&&("true"===localStorage.getItem("toolbarExpanded")?o():a(),t.addEventListener("click",function(){"true"===t.getAttribute("aria-expanded")?a():o()}),t.addEventListener("keydown",function(e){" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),t.click())}),n.querySelectorAll(".toolbar-btn").forEach(function(e){e.addEventListener("click",function(){!function(e){if(!e)return;const t="toolbar_usage_"+e,n=parseInt(localStorage.getItem(t)||"0");localStorage.setItem(t,(n+1).toString())}(e.id)})}))}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}(),function(){"use strict";document.querySelectorAll('a[href^="#"]').forEach(function(e){e.addEventListener("click",function(e){const t=this.getAttribute("href");if("#"===t)return;const n=document.querySelector(t);n&&(e.preventDefault(),n.scrollIntoView({behavior:"smooth",block:"start"}),n.setAttribute("tabindex","-1"),n.focus(),history.pushState&&history.pushState(null,null,t))})})}(),function(){"use strict";try{document.querySelector(":focus-visible")}catch(e){let t=!0,n=!1,o=null;const a={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function i(e){e.metaKey||e.altKey||e.ctrlKey||(t=!0)}function r(){t=!1}function c(e){e.target.classList.contains("focus-visible")||(t||d(e.target))&&(e.target.classList.add("focus-visible"),n=!0,clearTimeout(o),o=setTimeout(function(){n=!1},100))}function s(e){e.target.classList.contains("focus-visible")&&e.target.classList.remove("focus-visible")}function d(e){const t=e.type,n=e.tagName;return!("INPUT"!==n||!a[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}document.addEventListener("keydown",i,!0),document.addEventListener("mousedown",r,!0),document.addEventListener("pointerdown",r,!0),document.addEventListener("touchstart",r,!0),document.addEventListener("focus",c,!0),document.addEventListener("blur",s,!0)}}(),window.announceToScreenReader=function(e,t){t=t||"polite";const n=document.createElement("div");n.setAttribute("role","status"),n.setAttribute("aria-live",t),n.classList.add("sr-only"),n.textContent=e,document.body.appendChild(n),setTimeout(function(){document.body.removeChild(n)},1e3)},function(){"use strict";function e(e){const t=e.value.trim(),n=e.hasAttribute("required"),o=e.getAttribute("type");let a=!0,i="";n&&!t&&(a=!1,i="This field is required"),"email"===o&&t&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)&&(a=!1,i="Please enter a valid email address"),"url"===o&&t&&!function(e){try{return new URL(e),!0}catch(e){return!1}}(t)&&(a=!1,i="Please enter a valid URL"),e.setAttribute("aria-invalid",a?"false":"true");const r=e.id+"-error";let c=document.getElementById(r);return a?c&&(c.hidden=!0):(c||(c=document.createElement("span"),c.id=r,c.className="error-message",c.setAttribute("role","alert"),e.parentNode.appendChild(c),e.setAttribute("aria-describedby",r)),c.textContent=i,c.hidden=!1),a}document.querySelectorAll("form[data-validate]").forEach(function(t){t.addEventListener("submit",function(n){const o=function(t){let n=!0;return t.querySelectorAll("input, textarea, select").forEach(function(t){e(t)||(n=!1)}),n}(t);if(!o){n.preventDefault();const e=t.querySelector('[aria-invalid="true"]');e&&e.focus()}}),t.querySelectorAll("input, textarea, select").forEach(function(t){t.addEventListener("blur",function(){e(t)})})})}(),function(){"use strict";document.querySelectorAll("form[data-autosave]").forEach(function(e){const t=e.id||"form_"+Math.random().toString(36).substr(2,9);!function(e,t){const n=localStorage.getItem("formData_"+t);if(n)try{const t=JSON.parse(n);Object.keys(t).forEach(function(n){const o=e.querySelector('[name="'+n+'"]');o&&"password"!==o.type&&(o.value=t[n])}),announceToScreenReader("Form progress restored")}catch(e){}}(e,t),e.addEventListener("input",function(){!function(e,t){const n={};e.querySelectorAll("input, textarea, select").forEach(function(e){"password"!==e.type&&e.name&&(n[e.name]=e.value)}),localStorage.setItem("formData_"+t,JSON.stringify(n)),function(){let e=document.getElementById("autosave-indicator");e||(e=document.createElement("div"),e.id="autosave-indicator",e.className="autosave-indicator",e.textContent="âœ“ Saved",e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),document.body.appendChild(e)),e.classList.add("visible"),setTimeout(function(){e.classList.remove("visible")},2e3)}()}(e,t)}),e.addEventListener("submit",function(){!function(e){localStorage.removeItem("formData_"+e)}(t)})})}(),window.openModal=function(e){const t=document.getElementById(e);if(!t)return;t.dataset.lastFocus=document.activeElement.id||"",t.hidden=!1,t.setAttribute("aria-hidden","false"),trapFocus(t);const n=t.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');n&&n.focus(),document.addEventListener("keydown",handleModalEscape)},window.closeModal=function(e){const t=document.getElementById(e);if(!t)return;t.hidden=!0,t.setAttribute("aria-hidden","true");const n=t.dataset.lastFocus;if(n){const e=document.getElementById(n);e&&e.focus()}document.removeEventListener("keydown",handleModalEscape)};