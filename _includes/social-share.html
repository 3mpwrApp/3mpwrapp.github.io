{% comment %}
  Social Share Component
  Usage: {% include social-share.html 
            title="Page Title" 
            url="https://3mpwrapp.github.io/page" 
            description="Optional description"
            compact="true" (optional - for inline sharing)
         %}
{% endcomment %}

{% assign share_title = include.title | default: page.title | default: site.title %}
{% assign share_url = include.url | default: page.url | absolute_url %}
{% assign share_description = include.description | default: page.description | default: site.description %}
{% assign share_hashtag = "3mpwrApp" %}
{% assign site_url = "https://3mpwrapp.pages.dev" %}
{% assign compact = include.compact | default: false %}

{% comment %}Encode parameters for URLs{% endcomment %}
{% assign encoded_title = share_title | url_encode %}
{% assign encoded_url = share_url | url_encode %}
{% assign encoded_description = share_description | url_encode %}
{% assign encoded_hashtag = share_hashtag | url_encode %}

{% comment %}Build share text with hashtag and website{% endcomment %}
{% assign share_text = share_title | append: " - 3mpwrApp | " | append: site_url | append: " #3mpwrApp" %}
{% assign encoded_share_text = share_text | url_encode %}

<div class="social-share{% if compact %} social-share--compact{% endif %}" role="region" aria-label="Share this content on social media">
  <div class="social-share__header">
    <span class="social-share__label">
      <span aria-hidden="true">ðŸ“¢</span> Share{% unless compact %} with #3mpwrApp{% endunless %}
    </span>
  </div>
  
  <div class="social-share__buttons">
    {% comment %}Native Web Share API (mobile-friendly){% endcomment %}
    <button 
      class="social-share__btn social-share__btn--native"
      data-share-native
      data-title="{{ share_title | escape }}"
      data-text="{{ share_text | escape }}"
      data-url="{{ share_url }}"
      aria-label="Share via device sharing options"
      title="Share"
    >
      <svg class="social-share__icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
        <path fill="currentColor" d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z"/>
      </svg>
      <span class="social-share__text">Share</span>
    </button>

    {% comment %}Facebook{% endcomment %}
    <a 
      class="social-share__btn social-share__btn--facebook"
      href="https://www.facebook.com/sharer/sharer.php?u={{ encoded_url }}&hashtag=%23{{ encoded_hashtag }}"
      target="_blank"
      rel="noopener noreferrer"
      aria-label="Share on Facebook with #3mpwrApp"
      title="Share on Facebook"
    >
      {%- include social-icons.html name='facebook' -%}
      <span class="social-share__text">Facebook</span>
    </a>

    {% comment %}X (Twitter){% endcomment %}
    <a 
      class="social-share__btn social-share__btn--twitter"
      href="https://twitter.com/intent/tweet?text={{ encoded_share_text }}&url={{ encoded_url }}"
      target="_blank"
      rel="noopener noreferrer"
      aria-label="Share on X (Twitter) with #3mpwrApp"
      title="Share on X"
    >
      {%- include social-icons.html name='x' -%}
      <span class="social-share__text">X</span>
    </a>

    {% comment %}LinkedIn{% endcomment %}
    <a 
      class="social-share__btn social-share__btn--linkedin"
      href="https://www.linkedin.com/sharing/share-offsite/?url={{ encoded_url }}"
      target="_blank"
      rel="noopener noreferrer"
      aria-label="Share on LinkedIn"
      title="Share on LinkedIn"
    >
      <svg class="social-share__icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
        <path fill="currentColor" d="M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"/>
      </svg>
      <span class="social-share__text">LinkedIn</span>
    </a>

    {% comment %}Copy Link{% endcomment %}
    <button 
      class="social-share__btn social-share__btn--copy"
      data-share-copy
      data-url="{{ share_url }}"
      data-text="{{ share_text | escape }}"
      aria-label="Copy link to clipboard with #3mpwrApp"
      title="Copy link"
    >
      <svg class="social-share__icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
        <path fill="currentColor" d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
      </svg>
      <span class="social-share__text">Copy</span>
    </button>
  </div>

  {% unless compact %}
  <div class="social-share__footer">
    <small class="social-share__hashtag">
      Help spread the word about 3mpwrApp! Use <strong>#3mpwrApp</strong> when sharing.
    </small>
  </div>
  {% endunless %}
</div>
